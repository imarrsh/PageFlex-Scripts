
// ********************
// TABLE OF CONTENTS
// ********************

// PF VARS
// DATA
// DATA FUNCTIONS
// VISUAL STRUCTURE


// ********************
// PF VARS
// ********************

// grab profile variable values for accessing
var pf = {
    gapPlan : PFGetValue('GapPlanChoice'), // HSA or Non HSA
    stateRates : PFGetValue('GapStateRates'), // standard or Alternate (CO + OH)
    rateTier : PFGetValue('GapRateTier'), // 3 Tier or 4 Tier
    
    payrollFrequency : PFGetValue('PayRollFrequency'), // monthly, semiMonthly, biWeekly, or weekly
    numberOfPlans : PFGetValue('GapPlansShow'), // 1,2 or 3
    plansSelected : function(){ // return the sum of plans selected... 
        var sum = 0, 
        a = (PFGetValue('GapPlan1') !== '') ? sum++ : 0,
        b = (PFGetValue('GapPlan2') !== '') ? sum++ : 0,
        c = (PFGetValue('GapPlan3') !== '') ? sum++ : 0;

        return sum;
    },
    listPlansSelected : function(){ // return array of selected values
        // pick up if plans are selected
        var plan1 = PFGetValue('GapPlan1'),
        plan2 = PFGetValue('GapPlan2'),
        plan3 = PFGetValue('GapPlan3'),
        // pick up hsa plans
        hsaPlan1 = PFGetValue('GapPlan1_listHSA'),
        hsaPlan2 = PFGetValue('GapPlan2_listHSA'),
        hsaPlan3 = PFGetValue('GapPlan3_listHSA'),
        // pick up non-hsa
        nonHsaPlan1 = PFGetValue('GapPlan1_listNonHSA'),
        nonHsaPlan2 = PFGetValue('GapPlan2_listNonHSA'),
        nonHsaPlan3 = PFGetValue('GapPlan3_listNonHSA');

        var planList = [];

        // (expression) ? ((expression) ? true : false) : false
        var a = (plan1 !== '') ? (
                (this.gapPlan === 'HSA') ? planList.push(hsaPlan1) : planList.push(nonHsaPlan1)
            ) : false;

        var b = (plan2 !== '') ? (
                (this.gapPlan === 'HSA') ? planList.push(hsaPlan2) : planList.push(nonHsaPlan2)
            ) : false;

        var c = (plan3 !== '') ? (
                (this.gapPlan === 'HSA') ? planList.push(hsaPlan3) : planList.push(nonHsaPlan3)
            ) : false;
        
        return planList;

    },
    planScope : function() {
        var scope = this.gapPlan + '-' + this.stateRates + '-' + this.rateTier;
        return gapPlanData[scope];
    }
};

// test to give the total number of plans selected
function givemeSum(){
    return pf.plansSelected().toString();
}

// ********************
// DATA
// ********************

// for another day...
// var dataRequest = new ActiveXObject("Microsoft.XMLHTTP");
// dataRequest.open('GET', 'http://apps.ocozzio.com/mcdata/kemper/14258/gapRates.js');
// dataRequest.send();


var gapPlanData = {}; // set up the gapPlanData object

// content from:
// Final GAP RATES.xls, sheet "Non HSA HealthPlans-STD St 4T"
// plans 16, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12
// Standard State rates ** updated rates 7/20/16 **

gapPlanData['nonHSA-stdSt-4T'] = {
  '16': {
    "deductible": "None",
    "inpatient": 1000,
    "outpatientPerson": 500,
    "outpatientFamily": 1000,
    "sumDedIP": 1000,
    "payrollFrequency": {
      "monthly": [
        [18.46, 32.42, 39.58, 53.55],
        [25.21, 44.57, 45.54, 64.91],
        [40.08, 71.35, 64.31, 95.59]
      ],
      "semiMonthly": [
        [9.23, 16.21, 19.79, 26.78],
        [12.61, 22.29, 22.77, 32.46],
        [20.04, 35.68, 32.16, 47.80]
      ],
      "biWeekly": [
        [8.52, 14.96, 18.27, 24.72],
        [11.64, 20.57, 21.02, 29.96],
        [18.50, 32.93, 29.68, 44.12]
      ],
      "weekly": [
        [4.26, 7.48, 9.13, 12.36],
        [5.82, 10.29, 10.51, 14.98],
        [9.25, 16.47, 14.84, 22.06]
      ]
    }
  },
  '1': {
    "deductible": "None",
    "inpatient": 2000,
    "outpatientPerson": 1000,
    "outpatientFamily": 2000,
    "sumDedIP": 2000,
    "payrollFrequency": {
      "monthly": [
        [30.96, 54.92, 67.21, 91.17],
        [42.55, 75.78, 77.44, 110.68],
        [68.07, 121.73, 109.65, 163.31]
      ],
      "semiMonthly": [
        [15.48, 27.46, 33.61, 45.59],
        [21.28, 37.89, 38.72, 55.34],
        [34.04, 60.87, 54.83, 81.66]
      ],
      "biWeekly": [
        [14.29, 25.35, 31.02, 42.08],
        [19.64, 34.98, 35.74, 51.08],
        [31.42, 56.18, 50.61, 75.37]
      ],
      "weekly": [
        [7.14, 12.67, 15.51, 21.04],
        [9.82, 17.49, 17.87, 25.54],
        [15.71, 28.09, 25.30, 37.69]
      ]
    }
  },
  '2': {
    "deductible": "None",
    "inpatient": 3000,
    "outpatientPerson": 1500,
    "outpatientFamily": 3000,
    "sumDedIP": 3000,
    "payrollFrequency": {
      "monthly": [
        [40.89, 72.79, 89.14, 121.05],
        [56.31, 100.56, 102.77, 147.02],
        [90.29, 161.73, 145.65, 217.09]
      ],
      "semiMonthly": [
        [20.45, 36.40, 44.57, 60.53],
        [28.16, 50.28, 51.39, 73.51],
        [45.15, 80.87, 72.83, 108.55]
      ],
      "biWeekly": [
        [18.87, 33.60, 41.14, 55.87],
        [25.99, 46.41, 47.43, 67.86],
        [41.67, 74.64, 67.22, 100.20]
      ],
      "weekly": [
        [9.44, 16.80, 20.57, 27.93],
        [12.99, 23.21, 23.72, 33.93],
        [20.84, 37.32, 33.61, 50.10]
      ]
    }
  },
  '3': {
    "deductible": 250,
    "inpatient": 2000,
    "outpatientPerson": 1000,
    "outpatientFamily": 2000,
    "sumDedIP": 2250,
    "payrollFrequency": {
      "monthly": [
        [25.31, 44.74, 54.70, 74.14],
        [34.70, 61.65, 63.01, 89.97],
        [55.40, 98.93, 89.14, 132.66]
      ],
      "semimonthly": [
        [12.66, 22.37, 27.35, 37.07],
        [17.35, 30.83, 31.51, 44.99],
        [27.70, 49.47, 44.57, 66.33]
      ],
      "biWeekly": [
        [11.68, 20.65, 25.25, 34.22],
        [16.02, 28.45, 29.08, 41.52],
        [25.57, 45.66, 41.14, 61.23]
      ],
      "weekly": [
        [5.84, 10.32, 12.62, 17.11],
        [8.01, 14.23, 14.54, 20.76],
        [12.78, 22.83, 20.57, 30.61]
      ]
    }
  },
  '4': {
    "deductible": 250,
    "inpatient": 2500,
    "outpatientPerson": 1250,
    "outpatientFamily": 2500,
    "sumDedIP": 2750,
    "payrollFrequency": {
      "monthly": [
        [29.93, 53.07, 64.93, 88.07],
        [41.12, 73.21, 74.81, 106.91],
        [65.76, 117.57, 105.92, 157.73]
      ],
      "semimonthly": [
        [14.97, 26.54, 32.47, 44.04],
        [20.56, 36.61, 37.41, 53.46],
        [32.88, 58.79, 52.96, 78.87]
      ],
      "biWeekly": [
        [13.81, 24.49, 29.97, 40.65],
        [18.98, 33.79, 34.53, 49.34],
        [30.35, 54.26, 48.89, 72.80]
      ],
      "weekly": [
        [6.91, 12.25, 14.98, 20.32],
        [9.49, 16.89, 17.26, 24.67],
        [15.18, 27.13, 24.44, 36.40]
      ]
    }
  },
  '5': {
    "deductible": 250,
    "inpatient": 3000,
    "outpatientPerson": 1500,
    "outpatientFamily": 3000,
    "sumDedIP": 3250,
    "payrollFrequency": {
      "monthly": [
        [34.36, 61.05, 74.73, 101.42],
        [47.26, 84.27, 86.12, 123.13],
        [75.69, 135.44, 122.00, 181.75]
      ],
      "semimonthly": [
        [17.18, 30.53, 37.37, 50.71],
        [23.63, 42.14, 43.06, 61.57],
        [37.85, 67.72, 61.00, 90.88]
      ],
      "biWeekly": [
        [15.86, 28.18, 34.49, 46.81],
        [21.81, 38.89, 39.75, 56.83],
        [34.93, 62.51, 56.31, 83.88]
      ],
      "weekly": [
        [7.93, 14.09, 17.25, 23.40],
        [10.91, 19.45, 19.87, 28.41],
        [17.47, 31.26, 28.15, 41.94]
      ]
    }
  },
  '6': {
    "deductible": 250,
    "inpatient": 3500,
    "outpatientPerson": 1750,
    "outpatientFamily": 3500,
    "sumDedIP": 3750,
    "payrollFrequency": {
      "monthly": [
        [38.68, 68.84, 84.29, 114.45],
        [53.26, 95.08, 97.17, 138.97],
        [85.38, 152.88, 137.70, 205.20]
      ],
      "semimonthly": [
        [19.34, 34.42, 42.15, 57.23],
        [26.63, 47.54, 48.59, 69.49],
        [42.69, 76.44, 68.85, 102.60]
      ],
      "biWeekly": [
        [17.85, 31.77, 38.90, 52.82],
        [24.58, 43.88, 44.85, 64.14],
        [39.41, 70.56, 63.55, 94.71]
      ],
      "weekly": [
        [8.93, 15.89, 19.45, 26.41],
        [12.29, 21.94, 22.42, 32.07],
        [19.70, 35.28, 31.78, 47.35]
      ]
    }
  },
  '7': {
    "deductible": 250,
    "inpatient": 4000,
    "outpatientPerson": 2000,
    "outpatientFamily": 4000,
    "sumDedIP": 4250,
    "payrollFrequency": {
      "monthly": [
        [42.90, 76.42, 93.60, 127.12],
        [59.10, 105.59, 107.91, 154.39],
        [94.80, 169.85, 152.96, 228.01]
      ],
      "semimonthly": [
        [21.45, 38.21, 46.80, 63.56],
        [29.55, 52.80, 53.96, 77.20],
        [47.40, 84.93, 76.48, 114.01]
      ],
      "biWeekly": [
        [19.80, 35.27, 43.20, 58.67],
        [27.28, 48.73, 49.80, 71.26],
        [43.75, 78.39, 70.60, 105.24]
      ],
      "weekly": [
        [9.90, 17.64, 21.60, 29.34],
        [13.64, 24.37, 24.90, 35.63],
        [21.88, 39.20, 35.30, 52.62]
      ]
    }
  },
  '8': {
    "deductible": 250,
    "inpatient": 4500,
    "outpatientPerson": 2250,
    "outpatientFamily": 4500,
    "sumDedIP": 4750,
    "payrollFrequency": {
      "monthly": [
        [46.98, 83.78, 102.63, 139.42],
        [64.77, 115.78, 118.34, 169.36],
        [103.96, 186.32, 167.79, 250.15]
      ],
      "semimonthly": [
        [23.49, 41.89, 51.32, 69.71],
        [32.39, 57.89, 59.17, 84.68],
        [51.98, 93.16, 83.90, 125.08]
      ],
      "biWeekly": [
        [21.68, 38.67, 47.37, 64.35],
        [29.89, 53.44, 54.62, 78.17],
        [47.98, 85.99, 77.44, 115.45]
      ],
      "weekly": [
        [10.84, 19.33, 23.68, 32.17],
        [14.95, 26.72, 27.31, 39.08],
        [23.99, 43.00, 38.72, 57.73]
      ]
    }
  },
  '9': {
    "deductible": 250,
    "inpatient": 5000,
    "outpatientPerson": 2500,
    "outpatientFamily": 5000,
    "sumDedIP": 5250,
    "payrollFrequency": {
      "monthly": [
        [50.33, 89.81, 110.03, 149.49],
        [69.41, 124.15, 126.88, 181.61],
        [111.46, 199.82, 179.93, 268.30]
      ],
      "semimonthly": [
        [25.17, 44.91, 55.02, 74.75],
        [34.71, 62.08, 63.44, 90.81],
        [55.73, 99.91, 89.97, 134.15]
      ],
      "biWeekly": [
        [23.23, 41.45, 50.78, 69.00],
        [32.04, 57.30, 58.56, 83.82],
        [51.44, 92.22, 83.04, 123.83]
      ],
      "weekly": [
        [11.61, 20.73, 25.39, 34.50],
        [16.02, 28.65, 29.28, 41.91],
        [25.72, 46.11, 41.52, 61.92]
      ]
    }
  },
  '10': {
    "deductible": 500,
    "inpatient": 3000,
    "outpatientPerson": 1500,
    "outpatientFamily": 3000,
    "sumDedIP": 3500,
    "payrollFrequency": {
      "monthly": [
        [31.10, 55.17, 67.51, 91.58],
        [42.73, 76.11, 77.79, 111.17],
        [68.38, 122.27, 110.15, 164.04]
      ],
      "semimonthly": [
        [15.55, 27.59, 33.76, 45.79],
        [21.37, 38.06, 38.90, 55.59],
        [34.19, 61.14, 55.08, 82.02]
      ],
      "biWeekly": [
        [14.35, 25.46, 31.16, 42.27],
        [19.72, 35.13, 35.90, 51.31],
        [31.56, 56.43, 50.84, 75.71]
      ],
      "weekly": [
        [7.18, 12.73, 15.58, 21.13],
        [9.86, 17.56, 17.95, 25.65],
        [15.78, 28.22, 25.42, 37.86]
      ]
    }
  },
  '11': {
    "deductible": 500,
    "inpatient": 4000,
    "outpatientPerson": 2000,
    "outpatientFamily": 4000,
    "sumDedIP": 4500,
    "payrollFrequency": {
      "monthly": [
        [39.11, 69.60, 85.23, 115.72],
        [53.85, 96.14, 98.25, 140.53],
        [86.32, 154.59, 139.23, 207.49]
      ],
      "semimonthly": [
        [19.56, 34.80, 42.62, 57.86],
        [26.93, 48.07, 49.13, 70.27],
        [43.16, 77.30, 69.62, 103.75]
      ],
      "biWeekly": [
        [18.05, 32.12, 39.34, 53.41],
        [24.85, 44.37, 45.35, 64.86],
        [39.84, 71.35, 64.26, 95.76]
      ],
      "weekly": [
        [9.03, 16.06, 19.67, 26.70],
        [12.43, 22.19, 22.67, 32.43],
        [19.92, 35.67, 32.13, 47.88]
      ]
    }
  },
  '12': {
      "deductible": 500,
      "inpatient": 5000,
      "outpatientPerson": 2500,
      "outpatientFamily": 5000,
      "sumDedIP": 5500,
      "payrollFrequency": {
          "monthly": [
              [46.12, 82.22, 100.71, 136.81],
              [63.57, 113.63, 116.13, 166.18],
              [102.02, 182.84, 164.65, 245.46]
          ],
          "semimonthly": [
              [23.06, 41.11, 50.36, 68.41],
              [31.79, 56.82, 58.07, 83.09],
              [51.01, 91.42, 82.33, 122.73]
          ],
          "biWeekly": [
              [21.29, 37.95, 46.48, 63.14],
              [29.34, 52.44, 53.60, 76.70],
              [47.09, 84.39, 75.99, 113.29]
          ],
          "weekly": [
              [10.64, 18.97, 23.24, 31.57],
              [14.67, 26.22, 26.80, 38.35],
              [23.54, 42.19, 38.00, 56.64]
          ]
      }
   }
};

// content from:
// Final GAP RATES.xls, sheet "Non HSA HealthPlans-CO & OH 4T"
// plans 16, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12
// CO & OH Rates ** updated rates 7/20/16 **

gapPlanData['nonHSA-alt-4T'] = {
    '16': {
        "deductible": "None",
        "inpatient": 1000,
        "outpatientPerson": 500,
        "outpatientFamily": 1000,
        "sumDedIP": 1000,
        "payrollFrequency": {
            "monthly": [
                [16.24, 28.44, 34.68, 46.87],
                [22.13, 39.04, 39.88, 56.79],
                [35.12, 62.42, 56.27, 83.57]
            ],
            "semiMonthly": [
                [8.12, 14.22, 17.34, 23.44],
                [11.07, 19.52, 19.94, 28.40],
                [17.56, 31.21, 28.14, 41.79]
            ],
            "biWeekly": [
                [7.50, 13.13, 16.01, 21.63],
                [10.21, 18.02, 18.41, 26.21],
                [16.21, 28.81, 25.97, 38.57]
            ],
            "weekly": [
                [3.75, 6.56, 8.00, 10.82], 
                [5.11, 9.01, 9.20, 13.11], 
                [8.10, 14.40, 12.99, 19.29]
            ]
        }
    },
    '1': {
        "deductible": "None",
        "inpatient": 2000,
        "outpatientPerson": 1000,
        "outpatientFamily": 2000,
        "sumDedIP": 2000,
        "payrollFrequency": {
            "monthly": [
                [27.15, 48.08, 58.80, 79.73], 
                [37.27, 66.29, 67.73, 96.75], 
                [59.56, 106.40, 95.86, 142.70]
            ],
            "semiMonthly": [
                [13.58, 24.04, 29.40, 39.87], 
                [18.64, 33.15, 33.87, 48.38], 
                [29.78, 50.20, 47.93, 71.35]
            ],
            "biWeekly": [
                [12.53, 22.19, 27.14, 36.80],
                [17.20, 30.60, 31.26, 44.65],
                [27.49, 49.11, 44.24, 65.86]
            ],
            "weekly": [
                [6.27, 11.10, 13.57, 18.40],
                [8.60, 15.30, 15.63, 22.33],
                [13.74, 24.55, 22.12, 32.93]
            ]
        }
    },
    '2': {
        "deductible": "None",
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3000,
        "payrollFrequency": {
            "monthly": [
                [35.82, 63.67, 77.95, 105.80],
                [49.29, 87.92, 89.85, 128.48],
                [78.95, 141.31, 127.28, 189.65]
            ],
            "semiMonthly": [
                [17.91, 31.84, 38.98, 52.90],
                [24.65, 43.96, 44.93, 64.24],
                [39.48, 70.66, 63.64, 94.83]
            ],
            "biWeekly": [
                [16.53, 29.39, 35.98, 48.83],
                [22.75, 40.58, 41.47, 59.30],
                [36.44, 65.22, 58.74, 87.53]
            ],
            "weekly": [
                [16.53, 29.39, 35.98, 48.83],
                [22.75, 40.58, 41.47, 59.30],
                [36.44, 65.22, 58.74, 87.53]
            ]
        }
    },
    '3': {
        "deductible": 250,
        "inpatient": 2000,
        "outpatientPerson": 1500,
        "outpatientFamily": 2000,
        "sumDedIP": 2250,
        "payrollFrequency": {
            "monthly": [
                [22.21, 39.19, 47.88, 64.86],
                [30.42, 53.96, 55.13, 78.67],
                [48.50, 86.49, 77.95, 115.94]
            ],
            "semiMonthly": [
                [11.11, 19.60, 23.94, 32.43],
                [15.21, 26.98, 27.57, 39.34],
                [24.25, 43.25, 38.98, 57.97]
            ],
            "biWeekly": [
                [10.25, 18.09, 22.10, 29.94],
                [14.04, 24.90, 25.44, 36.31],
                [22.38, 39.92, 35.98, 53.51]
            ],
            "weekly": [
                [5.13, 9.04, 11.05, 14.97],
                [7.02, 12.45, 12.72, 18.15],
                [11.19, 19.96, 17.99, 26.76]
            ]
        }
    },
    '4': {
        "deductible": 250,
        "inpatient": 2500,
        "outpatientPerson": 1250,
        "outpatientFamily": 2500,
        "sumDedIP": 2750,
        "payrollFrequency": {
            "monthly": [
                [26.25, 46.46, 56.81, 77.02],
                [36.02, 64.04, 65.44, 93.46],
                [57.54, 102.77, 92.60, 137.82]
            ],
            "semiMonthly": [
                [13.13, 23.23, 28.41, 38.51],
                [18.01, 32.02, 32.72, 46.73],
                [28.77, 51.39, 46.30, 68.91]
            ],
            "biWeekly": [
                [13.13, 23.23, 28.41, 38.51],
                [18.01, 32.02, 32.72, 46.73],
                [28.77, 51.39, 46.30, 68.91]
            ],
            "weekly": [
                [6.06, 10.72, 13.11, 17.77],
                [8.31, 14.78, 15.10, 21.57],
                [13.28, 23.72, 21.37, 31.80]
            ]
        }
    },
    '5': {
        "deductible": 250,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3250,
        "payrollFrequency": {
            "monthly": [
                [29.13, 52.43, 64.36, 87.66],
                [40.39, 72.70, 74.31, 106.62],
                [65.21, 117.37, 105.63, 157.80]
            ],
            "semiMonthly": [
                [15.07, 26.72, 32.68, 44.33],
                [20.70, 36.85, 37.66, 53.81],
                [33.11, 59.19, 53.32, 79.40]
            ],
            "biWeekly": [
                [13.91, 24.66, 30.17, 40.92],
                [19.10, 34.02, 34.76, 49.67],
                [30.56, 54.63, 49.21, 73.29]
            ],
            "weekly": [
                [6.95, 12.33, 15.08, 20.46],
                [9.55, 17.01, 17.38, 24.84],
                [15.28, 27.32, 24.61, 36.65]
            ]
        }
    },
    '6': {
        "deductible": 250,
        "inpatient": 3500,
        "outpatientPerson": 1750,
        "outpatientFamily": 3500,
        "sumDedIP": 3750,
        "payrollFrequency": {
            "monthly": [
                [33.90, 60.22, 73.71, 100.04],
                [46.63, 83.13, 84.96, 121.46],
                [74.67, 133.59, 120.34, 179.27]
            ],
            "semiMonthly": [
                [16.95, 30.11, 36.86, 50.02],
                [23.32, 41.57, 42.48, 60.73],
                [37.34, 66.80, 60.17, 89.64]
            ],
            "biWeekly": [
                [15.65, 27.79, 34.02, 46.17],
                [21.52, 38.37, 39.21, 56.06],
                [34.46, 61.66, 55.54, 82.74]
            ],
            "weekly": [
                [7.82, 13.90, 17.01, 23.09],
                [10.76, 19.18, 19.61, 28.03],
                [17.23, 30.83, 27.77, 41.37]
            ]
        }
    },
    '7': {
        "deductible": 250,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIP": 4250,
        "payrollFrequency": {
            "monthly": [
                [37.58, 66.84, 81.84, 111.10],
                [51.72, 92.31, 94.33, 134.92],
                [82.90, 148.41, 133.66, 199.17]
            ],
            "semiMonthly": [
                [18.79, 33.42, 40.92, 55.55],
                [25.86, 46.16, 47.17, 67.46],
                [41.45, 74.21, 66.83, 99.59]
            ],
            "biWeekly": [
                [17.34, 30.85, 37.77, 51.28],
                [23.87, 42.60, 43.54, 62.27],
                [38.26, 68.50, 61.69, 91.92]
            ],
            "weekly": [
                [8.67, 15.42, 18.89, 25.64],
                [11.94, 21.30, 21.77, 31.14],
                [19.13, 34.25, 30.84, 45.96]
            ]
        }
    },
    '8': {
        "deductible": 250,
        "inpatient": 4500,
        "outpatientPerson": 2250,
        "outpatientFamily": 4500,
        "sumDedIP": 4750,
        "payrollFrequency": {
            "monthly": [
                [41.15, 73.26, 89.73, 121.84],
                [56.67, 101.21, 103.43, 147.97],
                [90.88, 162.78, 146.61, 218.52]
            ],
            "semiMonthly": [
                [20.58, 36.63, 44.87, 60.92],
                [28.34, 50.61, 51.72, 73.99],
                [45.44, 81.39, 73.31, 109.26]
            ],
            "biWeekly": [
                [18.99, 33.81, 41.41, 56.23],
                [26.16, 46.71, 47.74, 68.29],
                [41.94, 75.13, 67.67, 100.86]
            ],
            "weekly": [
                [9.50, 16.91, 20.71, 28.12],
                [13.08, 23.36, 23.87, 34.15],
                [20.97, 37.56, 33.83, 50.43]
            ]
        }
    },
    '9': {
        "deductible": 250,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIP": 5250,
        "payrollFrequency": {
            "monthly": [
                [44.07, 78.53, 96.19, 130.65],
                [60.73, 108.51, 110.90, 158.68],
                [97.42, 174.57, 157.21, 234.35]
            ],
            "semiMonthly": [
                [22.04, 39.27, 48.10, 65.33],
                [30.37, 54.26, 55.45, 79.34],
                [48.71, 87.29, 78.61, 117.18]
            ],
            "biWeekly": [
                [20.34, 36.24, 44.40, 60.30],
                [28.03, 50.08, 51.18, 73.24],
                [44.96, 80.57, 72.56, 108.16]
            ],
            "weekly": [
                [10.17, 18.12, 22.20, 30.15],
                [14.01, 25.04, 25.59, 36.62],
                [22.48, 40.29, 36.28, 54.08]
            ]
        }
    },
    '10': {
        "deductible": 500,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3500,
        "payrollFrequency": {
            "monthly": [
                [27.28, 48.29, 59.06, 80.08],
                [37.43, 66.58, 68.04, 97.18],
                [59.82, 106.88, 96.29, 143.34]
            ],
            "semiMonthly": [
                [13.64, 24.15, 29.53, 40.04],
                [18.72, 33.29, 34.02, 48.59],
                [29.91, 53.44, 48.15, 71.67]
            ],
            "biWeekly": [
                [12.59, 22.29, 27.26, 36.96],
                [17.28, 30.73, 31.40, 44.85],
                [27.61, 49.33, 44.44, 66.16]
            ],
            "weekly": [
                [6.30, 11.14, 13.63, 18.48],
                [8.64, 15.36, 15.70, 22.43],
                [13.80, 24.66, 22.22, 33.08]
            ]
        }
    },
    '11': {
        "deductible": 500,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIP": 4500,
        "payrollFrequency": {
            "monthly": [
                [34.27, 60.89, 74.53, 101.15],
                [47.14, 84.06, 85.90, 122.81],
                [75.49, 135.09, 121.68, 181.27]
            ],
            "semiMonthly": [
                [17.14, 30.45, 37.27, 50.58],
                [23.57, 42.03, 42.95, 61.41],
                [37.75, 67.55, 60.84, 90.64]
            ],
            "biWeekly": [
                [15.82, 28.10, 34.40, 46.68],
                [21.76, 38.80, 39.65, 56.68],
                [34.84, 62.35, 56.16, 83.66]
            ],
            "weekly": [
                [7.91, 14.05, 17.20, 23.34],
                [10.88, 19.40, 19.82, 28.34],
                [17.42, 31.17, 28.08, 41.83]
            ]
        }
    },
    '12': {
        "deductible": 500,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIP": 5500,
        "payrollFrequency": {
            "monthly": [
                [40.39, 71.91, 88.06, 119.57],
                [55.63, 99.33, 101.51, 145.21],
                [89.19, 159.74, 143.87, 214.42]
            ],
            "semiMonthly": [
                [20.20, 35.96, 44.03, 59.79],
                [27.82, 49.67, 50.76, 72.61],
                [44.60, 79.87, 71.94, 107.21]
            ],
            "biWeekly": [
                [18.64, 33.19, 40.64, 55.19],
                [25.68, 45.84, 46.85, 67.02],
                [41.16, 73.73, 66.40, 98.96]
            ],
            "weekly": [
                [9.32, 16.59, 20.32, 27.59],
                [12.84, 22.92, 23.43, 33.51],
                [20.58, 36.86, 33.20, 49.48]
            ]
        }
    }
};

// content from:
// Final GAP RATES.xls, sheet "HSA Health Plans-Std States 4T"
// plans 13, 14 ,15
// Standard State Rates ** updated rates 7/20/16 **

gapPlanData['HSA-stdSt-4T'] = {
    '13': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIPInd": 4300,
        "sumDedIPFam": 5600,
        "payrollFrequency": {
            "monthly": [
                [24.57, 43.42, 53.09, 71.94],
                [33.68, 59.83, 61.13, 87.29],
                [53.76, 95.98, 86.48, 128.69]
            ],
            "semiMonthly": [
                [12.29, 21.71, 26.55, 35.97],
                [16.84, 29.92, 30.57, 43.65],
                [26.88, 47.99, 43.24, 64.35]
            ],
            "biWeekly": [
                [11.34, 20.04, 24.50, 33.20],
                [15.54, 27.61, 28.21, 40.29],
                [24.81, 44.30, 39.91, 59.40]
            ],
            "weekly": [
                [5.67, 10.02, 12.25, 16.60],
                [7.77, 13.81, 14.11, 20.14],
                [12.41, 22.15, 19.96, 29.70]
            ]
        }
    },
    '14': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIPInd": 5300,
        "sumDedIPFam": 6600,
        "payrollFrequency": {
            "monthly": [
                [31.21, 55.39, 67.77, 91.95],
                [42.90, 76.43, 78.10, 111.62],
                [68.65, 122.76, 110.59, 164.70]
            ],
            "semiMonthly": [
                [15.61, 27.70, 33.89, 45.98],
                [21.45, 38.22, 39.05, 55.81],
                [34.33, 61.38, 55.30, 82.35]
            ],
            "biWeekly": [
                [14.40, 25.56, 31.28, 42.44],
                [19.80, 35.28, 36.05, 51.52],
                [31.68, 56.66, 51.04, 76.02]
            ],
            "weekly": [
                [7.20, 12.78, 15.64, 21.22],
                [9.90, 17.64, 18.02, 25.76],
                [15.84, 28.33, 25.52, 38.01]
            ]
        }
    },
    '15': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIPInd": 6300,
        "sumDedIPFam": 7600,
        "payrollFrequency": {
            "monthly": [
                [37.04, 65.87, 80.64, 109.47],
                [50.98, 90.96, 92.96, 132.93],
                [81.68, 146.23, 131.70, 196.25]
            ],
            "semiMonthly": [
                [18.52, 32.94, 40.32, 54.74],
                [25.49, 45.48, 46.48, 66.47],
                [40.84, 73.12, 65.85, 98.13]
            ],
            "biWeekly": [
                [17.10, 30.40, 37.22, 50.52],
                [23.53, 41.98, 42.90, 61.35],
                [37.70, 67.49, 60.78, 90.58]
            ],
            "weekly": [
                [8.55, 15.20, 18.61, 25.26],
                [11.76, 20.99, 21.45, 30.68],
                [18.85, 33.75, 30.39, 45.29]
            ]
        }
    }
};

// content from:
// Final GAP RATES.xls, sheet "HSA Health Plans-CO & OH 4T"
// plans 13, 14 ,15
// CO & OH Rates ** updated rates 7/20/16 **

gapPlanData['HSA-alt-4T']= {
    '13': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIPInd": 4300,
        "sumDedIPFam": 5600,
        "payrollFrequency": {
            "monthly": [
                [21.58, 38.04, 46.47, 62.93],
                [29.53, 52.36, 53.50, 76.33],
                [47.06, 83.91, 75.63, 112.48]
            ],
            "semiMonthly": [
                [10.79, 19.02, 23.24, 31.47],
                [14.77, 26.18, 26.75, 38.17],
                [23.53, 41.96, 37.82, 56.24]
            ],
            "biWeekly": [
                [9.96, 17.56, 21.45, 29.04],
                [13.63, 24.17, 24.69, 35.23],
                [21.72, 38.73, 34.91, 51.91]
            ],
            "weekly": [
                [4.98, 8.78, 10.72, 14.52],
                [6.81, 12.08, 12.35, 17.61],
                [10.86, 19.36, 17.45, 25.96]
            ]
        }
    },
    '14': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIPInd": 5300,
        "sumDedIPFam": 6600,
        "payrollFrequency": {
            "monthly": [
                [27.38, 48.48, 59.30, 80.40],
                [37.58, 66.85, 68.31, 97.57],
                [60.06, 107.30, 96.67, 143.92]
            ],
            "semiMonthly": [
                [13.69, 24.24, 29.65, 40.20],
                [18.79, 33.43, 34.16, 48.79],
                [30.03, 53.65, 48.34, 71.96]
            ],
            "biWeekly": [
                [12.64, 22.38, 27.37, 37.11],
                [17.34, 30.85, 31.53, 45.03],
                [27.72, 49.52, 44.62, 66.42]
            ],
            "weekly": [
                [6.32, 11.19, 13.68, 18.55],
                [8.67, 15.43, 15.76, 22.52],
                [13.86, 24.76, 22.31, 33.21]
            ]
        }
    },
    '15': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIPInd": 6300,
        "sumDedIPFam": 7600,
        "payrollFrequency": {
            "monthly": [
                [32.46, 57.63, 70.53, 95.69],
                [44.63, 79.53, 81.28, 116.18],
                [71.43, 127.78, 115.10, 171.45]
            ],
            "semiMonthly": [
                [16.23, 28.82, 35.27, 47.85],
                [22.32, 39.77, 40.64, 58.09],
                [35.72, 63.89, 57.55, 85.73]
            ],
            "biWeekly": [
                [14.98, 26.60, 32.55, 44.16],
                [20.60, 36.71, 37.51, 53.62],
                [32.97, 58.98, 53.12, 79.13]
            ],
            "weekly": [
                [7.49, 13.30, 16.28, 22.08],
                [10.30, 18.35, 18.76, 26.81],
                [16.48, 29.49, 26.56, 39.57]
            ]
        }
    }
};


// content from:
// Final GAP RATES.xls, sheet "Non HSA HealthPlans-Std St 3T "
// plans 16, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12
// Standard State Rates ** updated rates 7/22/16 **

gapPlanData['nonHSA-stdSt-3T'] = {
    '16': {
        "deductible": "None",
        "inpatient": 1000,
        "outpatientPerson": 500,
        "outpatientFamily": 1000,
        "sumDedIP": 1000,
        "payrollFrequency": {
            "monthly": [
                [18.46, 31.02, 49.88],
                [25.21, 40.22, 61.04],
                [40.08, 62.36, 92.07]
            ],
            "semiMonthly": [
                [9.23, 15.51, 24.94],
                [12.61, 20.11, 30.52],
                [20.04, 31.18, 46.04]
            ],
            "biWeekly": [
                [8.52, 14.32, 23.02],
                [11.64, 18.56, 28.17],
                [18.50, 28.78, 42.49]
            ],
            "weekly": [
                [4.26, 7.16, 11.51],
                [5.82, 9.28, 14.09],
                [9.25, 14.39, 21.25]
            ]
        }
    },
    '1': {
        "deductible": "None",
        "inpatient": 2000,
        "outpatientPerson": 1000,
        "outpatientFamily": 2000,
        "sumDedIP": 2000,
        "payrollFrequency": {
            "monthly": [
                [30.96, 52.53, 84.89],
                [42.55, 68.30, 104.03],
                [68.07, 106.30, 157.27]
            ],
            "semiMonthly": [
                [15.48, 26.27, 42.45],
                [21.28, 34.15, 52.02],
                [34.04, 53.15, 78.64]
            ],
            "biWeekly": [
                [14.29, 24.24, 39.18],
                [19.64, 31.52, 48.01],
                [31.42, 49.06, 72.59]
            ],
            "weekly": [
                [7.14, 12.12, 19.59],
                [9.82, 15.76, 24.01],
                [15.71, 24.53, 36.29]
            ]
        }
    },
    '2': {
        "deductible": "None",
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3000,
        "payrollFrequency": {
            "monthly": [
                [40.89, 69.60, 112.68],
                [56.31, 90.61, 138.17],
                [90.29, 141.19, 209.05]
            ],
            "semiMonthly": [
                [20.45, 34.80, 56.34],
                [28.16, 45.31, 69.09],
                [45.15, 70.60, 104.53]
            ],
            "biWeekly": [
                [18.87, 32.12, 52.01],
                [25.99, 41.82, 63.77],
                [41.67, 65.16, 96.48]
            ],
            "weekly": [
                [9.44, 16.06, 26.00],
                [12.99, 20.91, 31.89],
                [20.84, 32.58, 48.24]
            ]
        }
    },
    '3': {
        "deductible": 250,
        "inpatient": 2000,
        "outpatientPerson": 1000,
        "outpatientFamily": 2000,
        "sumDedIP": 2250,
        "payrollFrequency": {
            "monthly": [
                [25.31, 42.80, 69.04],
                [34.70, 55.59, 84.58],
                [55.40, 86.41, 127.76]
            ],
            "semiMonthly": [
                [12.66, 21.40, 34.52],
                [17.35, 27.80, 42.29],
                [27.70, 43.21, 63.88]
            ],
            "biWeekly": [
                [11.68, 19.75, 31.86],
                [16.02, 25.66, 39.04],
                [25.57, 39.88, 58.97]
            ],
            "weekly": [
                [5.84, 9.88, 15.93],
                [8.01, 12.83, 19.52],
                [12.78, 19.94, 29.48]
            ]
        }
    },
    '4': {
        "deductible": 250,
        "inpatient": 2500,
        "outpatientPerson": 1250,
        "outpatientFamily": 2500,
        "sumDedIP": 1750,
        "payrollFrequency": {
            "monthly": [
                [29.93, 50.76, 81.99],
                [41.12, 65.98, 100.48],
                [65.76, 102.68, 151.90]
            ],
            "semiMonthly": [
                [14.97, 25.38, 41.00],
                [20.56, 32.99, 50.24],
                [32.88, 51.34, 75.95]
            ],
            "biWeekly": [
                [13.81, 23.43, 37.84],
                [18.98, 30.45, 46.38],
                [30.35, 47.39, 70.11]
            ],
            "weekly": [
                [6.91, 11.71, 18.92],
                [9.49, 15.23, 23.19],
                [15.18, 23.70, 35.05]
            ]
        }
    },
    '5': {
        "deductible": 250,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3250,
        "payrollFrequency": {
            "monthly": [
                [34.36, 58.38, 94.41],
                [47.26, 75.95, 115.73],
                [75.69, 118.26, 175.02]
            ],
            "semiMonthly": [
                [17.18, 29.19, 47.21],
                [23.63, 37.98, 57.87],
                [37.85, 59.13, 87.51]
            ],
            "biWeekly": [
                [15.86, 26.94, 43.57],
                [21.81, 35.05, 53.41],
                [34.93, 54.58, 80.78]
            ],
            "weekly": [
                [7.93, 13.47, 21.79],
                [10.91, 17.53, 26.71],
                [17.47, 27.29, 40.39]
            ]
        }
    },
    '6': {
        "deductible": 250,
        "inpatient": 3500,
        "outpatientPerson": 1750,
        "outpatientFamily": 3500,
        "sumDedIP": 3750,
        "payrollFrequency": {
            "monthly": [
                [38.68, 65.82, 106.53],
                [53.26, 85.66, 130.61],
                [85.38, 133.47, 197.60]
            ],
            "semiMonthly": [
                [19.34, 32.91, 53.27],
                [26.63, 42.83, 65.31],
                [42.69, 66.74, 98.80]
            ],
            "biWeekly": [
                [17.85, 30.38, 49.17],
                [24.58, 39.54, 60.28],
                [39.41, 61.60, 91.20]
            ],
            "weekly": [
                [8.93, 15.19, 24.58],
                [12.29, 19.77, 30.14],
                [19.70, 30.80, 45.60]
            ]
        }
    },
    '7': {
        "deductible": 250,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIP": 4250,
        "payrollFrequency": {
            "monthly": [
                [42.90, 73.07, 118.31],
                [59.10, 95.13, 145.10],
                [94.80, 148.27, 219.57]
            ],
            "semiMonthly": [
                [21.45, 36.54, 59.16],
                [29.55, 47.57, 72.55],
                [47.40, 74.14, 109.79]
            ],
            "biWeekly": [
                [19.80, 33.72, 54.60],
                [27.28, 43.91, 66.97],
                [43.75, 68.43, 101.34]
            ],
            "weekly": [
                [9.90, 16.86, 27.30],
                [13.64, 21.95, 33.48],
                [21.88, 34.22, 50.67]
            ]
        }
    },
    '8': {
        "deductible": 250,
        "inpatient": 4500,
        "outpatientPerson": 2250,
        "outpatientFamily": 4500,
        "sumDedIP": 4750,
        "payrollFrequency": {
            "monthly": [
                [46.98, 80.10, 129.76],
                [64.77, 104.31, 159.15],
                [103.96, 162.64, 240.89]
            ],
            "semiMonthly": [
                [23.49, 40.05, 64.88],
                [32.39, 52.16, 79.58],
                [51.98, 81.32, 120.45]
            ],
            "biWeekly": [
                [21.68, 36.97, 59.89],
                [29.89, 48.14, 73.45],
                [47.98, 75.06, 111.18]
            ],
            "weekly": [
                [10.84, 18.48, 29.94],
                [14.95, 24.07, 36.73],
                [23.99, 37.53, 55.59]
            ]
        }
    },
    '9': {
        "deductible": 250,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIP": 5250,
        "payrollFrequency": {
            "monthly": [
                [50.33, 85.86, 139.14],
                [69.41, 111.84, 170.67],
                [111.46, 174.42, 258.36]
            ],
            "semiMonthly": [
                [25.17, 42.93, 69.57],
                [34.71, 55.92, 85.34],
                [55.73, 87.21, 129.18]
            ],
            "biWeekly": [
                [23.23, 39.63, 64.22],
                [32.04, 51.62, 78.77],
                [51.44, 80.50, 119.24]
            ],
            "weekly": [
                [11.61, 19.81, 32.11],
                [16.02, 25.81, 39.39],
                [25.72, 40.25, 59.62]
            ]
        }
    },
    '10': {
        "deductible": 500,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3500,
        "payrollFrequency": {
            "monthly": [
                [31.10, 52.76, 85.26],
                [42.73, 68.60, 104.50],
                [68.38, 106.78, 157.99]
            ],
            "semiMonthly": [
                [15.55, 26.38, 42.63],
                [21.37, 34.30, 52.25],
                [34.19, 53.39, 79.00]
            ],
            "biWeekly": [
                [14.35, 24.35, 39.35],
                [19.72, 31.66, 48.23],
                [31.56, 49.28, 72.92]
            ],
            "weekly": [
                [7.18, 12.18, 19.68],
                [9.86, 15.83, 24.12],
                [15.78, 24.64, 36.46]
            ]
        }
    },
    '11': {
        "deductible": 500,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIP": 4500,
        "payrollFrequency": {
            "monthly": [
                [39.11, 66.55, 107.72],
                [53.85, 86.62, 132.08],
                [86.32, 134.97, 199.81]
            ],
            "semiMonthly": [
                [19.56, 33.28, 53.86],
                [26.93, 43.31, 66.04],
                [43.16, 67.49, 99.91]
            ],
            "biWeekly": [
                [18.05, 30.72, 49.72],
                [24.85, 39.98, 60.96],
                [39.84, 62.29, 92.22]
            ],
            "weekly": [
                [9.03, 15.36, 24.86],
                [12.43, 19.99, 30.48],
                [19.92, 31.15, 46.11]
            ]
        }
    },
    '12': {
        "deductible": 500,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIP": 5500,
        "payrollFrequency": {
            "monthly": [
                [46.12, 78.61, 127.34],
                [63.57, 102.36, 156.17],
                [102.02, 159.59, 236.37]
            ],
            "semiMonthly": [
                [23.06, 39.31, 63.67],
                [31.79, 51.18, 78.09],
                [51.01, 79.80, 118.19]
            ],
            "biWeekly": [
                [21.29, 36.28, 58.77],
                [29.34, 47.24, 72.08],
                [47.09, 73.66, 109.09]
            ],
            "weekly": [
                [10.64, 18.14, 29.39],
                [14.67, 23.62, 36.04],
                [23.54, 36.83, 54.55]
            ]
        }
    }
};

// content from:
// Final GAP RATES.xls, sheet "Non HSA HealthPlans-CO & OH 3T"
// plans 16, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12
// CO & OH Rates ** updated rates 7/22/16 **

gapPlanData['nonHSA-alt-3T'] = {
    '16': {
        "deductible": "None",
        "inpatient": 1000,
        "outpatientPerson": 500,
        "outpatientFamily": 1000,
        "sumDedIP": 1000,
        "payrollFrequency": {
            "monthly": [
                [16.24, 27.21, 43.67],
                [22.13, 35.24, 53.41],
                [35.12, 54.57, 80.50]
            ],
            "semiMonthly": [
                [8.12, 13.61, 21.84],
                [11.07, 17.62, 26.71],
                [17.56, 27.29, 40.25]
            ],
            "biWeekly": [   
                [7.50, 12.56, 20.16],
                [10.21, 16.26, 24.65],
                [16.21, 25.19, 37.15]
            ],
            "weekly": [
                [3.75, 6.28, 10.08],
                [5.11, 8.13, 12.33],
                [8.10, 12.59, 18.58]
            ]
        }
    },
    '1': {
        "deductible": "None",
        "inpatient": 2000,
        "outpatientPerson": 1000,
        "outpatientFamily": 2000,
        "sumDedIP": 2000,
        "payrollFrequency": {
            "monthly": [
                [27.15, 45.98, 74.23],
                [37.27, 59.76, 90.95],
                [59.56, 92.93, 137.44]
            ],
            "semiMonthly": [
                [13.58, 22.99, 37.12],
                [18.64, 29.88, 45.48],
                [29.78, 46.47, 68.72]
            ],
            "biWeekly": [
                [12.53, 21.22, 34.26],
                [17.20, 27.58, 41.98],
                [27.49, 42.89, 63.43]
            ],
            "weekly": [
                [6.27, 10.61, 17.13],
                [8.60, 13.79, 20.99],
                [13.74, 21.45, 31.72]
            ]
        }
    },         
    '2': {
        "deductible": "None",
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3000,
        "payrollFrequency": {
            "monthly": [
                [35.82, 60.89, 98.50],
                [49.29, 79.22, 120.74],
                [78.95, 123.39, 182.63]
            ],
            "semiMonthly": [
                [17.91, 30.45, 49.25],
                [24.65, 39.61, 60.37],
                [39.48, 61.70, 91.32]
            ],
            "biWeekly": [
                [16.53, 28.10, 45.46],
                [22.75, 36.56, 55.73],
                [36.44, 56.95, 84.29]
            ],
            "weekly": [
                [8.27, 14.05, 22.73], 
                [11.37, 18.28, 27.86],
                [18.22, 28.47, 42.15]
            ]
        }
    },       
    '3': {
        "deductible": 250,
        "inpatient": 2000,
        "outpatientPerson": 1000,
        "outpatientFamily": 2000,
        "sumDedIP": 2250,
        "payrollFrequency": {
            "monthly": [
                [22.21, 37.49, 60.40],
                [30.42, 48.66, 73.96],
                [48.50, 75.57, 111.67]
            ],
            "semiMonthly": [
                [11.11, 18.75, 30.20],
                [15.21, 24.33, 36.98],
                [24.25, 37.79, 55.84]
            ],
            "biWeekly": [
                [10.25, 17.30, 27.88],
                [14.04, 22.46, 34.14],
                [22.38, 34.88, 51.54]
            ],
            "weekly": [
                [5.13, 8.65, 13.94],
                [7.02, 11.23, 17.07],
                [11.19, 17.44, 25.77]
            ]
        }
    },       
    '4': {
        "deductible": 250,
        "inpatient": 2500,
        "outpatientPerson": 1250,
        "outpatientFamily": 2500,
        "sumDedIP": 1750,
        "payrollFrequency": {
            "monthly": [
                [26.25, 44.43, 71.71],
                [36.02, 57.73, 87.85],
                [57.54, 89.76, 132.74]
            ],
            "semiMonthly": [
                [13.13, 22.22, 35.86],
                [18.01, 28.87, 43.93],
                [28.77, 44.88, 66.37]
            ],
            "biWeekly": [
                [12.12, 20.51, 33.10],
                [16.62, 26.64, 40.55],
                [26.56, 41.43, 61.26]
            ],
            "weekly": [
                [6.06, 10.25, 16.55],
                [8.31, 13.32, 20.27],
                [13.28, 20.71, 30.63]
            ]
        }
    },         
    '5': {
        "deductible": 250,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3250,
        "payrollFrequency": {
            "monthly": [
                [30.13, 51.10, 82.55],
                [41.39, 66.43, 101.16],
                [66.21, 103.37, 152.93]
            ],
            "semiMonthly": [
                [15.07, 25.55, 41.28],
                [20.70, 33.22, 50.58],
                [33.11, 51.69, 76.47]
            ],
            "biWeekly": [
                [13.91, 23.58, 38.10],
                [19.10, 30.66, 46.69],
                [30.56, 47.71, 70.58]
            ],
            "weekly": [
                [6.95, 11.79, 19.05],
                [9.55, 15.33, 23.34],
                [15.28, 23.85, 35.29]
            ]
        }
    },
    '6': {
        "deductible": 250,
        "inpatient": 3500,
        "outpatientPerson": 1750,
        "outpatientFamily": 3500,
        "sumDedIP": 3750,
        "payrollFrequency": {
            "monthly": [
                [33.90, 57.59, 93.13],
                [46.63, 74.91, 114.16],
                [74.67, 116.66, 172.64]
            ],
            "semiMonthly": [
                [16.95, 28.80, 46.57],
                [23.32, 37.46, 57.08],
                [37.34, 58.33, 86.32]
            ],
            "biWeekly": [
                [15.65, 26.58, 42.98],
                [21.52, 34.57, 52.69],
                [34.46, 53.84, 79.68]
            ],
            "weekly": [
                [7.82, 13.29, 21.49],
                [10.76, 17.29, 26.34],
                [17.23, 26.92, 39.84]
            ]
        }
    },
    '7': {
        "deductible": 250,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIP": 4250,
        "payrollFrequency": {
            "monthly": [
                [37.58, 63.91, 103.42],
                [51.72, 83.18, 126.79],
                [82.90, 129.57, 191.81]
            ],
            "semiMonthly": [
                [18.79, 31.96, 51.71],
                [25.86, 41.59, 63.40],
                [41.45, 64.79, 95.91]
            ],
            "biWeekly": [
                [17.34, 29.50, 47.73],
                [23.87, 38.39, 58.52],
                [38.26, 59.80, 88.53]
            ],
            "weekly": [
                [8.67, 14.75, 23.87],
                [11.94, 19.20, 29.26],
                [19.13, 29.90, 44.26]
            ]
        }
    },
    '8': {
        "deductible": 250,
        "inpatient": 4500,
        "outpatientPerson": 2250,
        "outpatientFamily": 4500,
        "sumDedIP": 4750,
        "payrollFrequency": {
            "monthly": [
                [41.15, 70.06, 113.41],
                [56.67, 91.19, 139.07],
                [90.88, 142.12, 210.42]
            ],
            "semiMonthly": [
                [20.58, 35.03, 56.71],
                [28.34, 45.60, 69.54],
                [45.44, 71.06, 105.21]
            ],
            "biWeekly": [
                [18.99, 32.34, 52.34], 
                [26.16, 42.09, 64.19],
                [41.94, 65.59, 97.12]
            ],
            "weekly": [
                [9.50, 16.17, 26.17],
                [13.08, 21.04, 32.09],
                [20.97, 32.80, 48.56]
            ]
        }
    },
    '9': {
        "deductible": 250,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIP": 5250,
        "payrollFrequency": {
            "monthly": [
                [44.07, 75.08, 121.59],
                [60.73, 97.76, 149.13],
                [97.42, 152.39, 225.67]
            ],
            "semiMonthly": [
                [22.04, 37.54, 60.80],
                [30.37, 48.88, 74.57],
                [48.71, 76.20, 112.84]
            ],
            "biWeekly": [
                [20.34, 34.65, 56.12],
                [28.03, 45.12, 68.83],
                [44.96, 70.33, 104.16]
            ],
            "weekly": [
                [10.17, 17.33, 28.06],
                [14.01, 22.56, 34.41],
                [22.48, 35.17, 52.08]
            ]
        }
    },
    '10': {
        "deductible": 500,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIP": 3500,
        "payrollFrequency": {
            "monthly": [
                [27.28, 46.19, 74.57],
                [37.43, 60.02, 91.35],
                [59.82, 93.35, 138.05]
            ],
            "semiMonthly": [
                [13.64, 23.10, 37.29],
                [18.72, 30.01, 45.68],
                [29.91, 46.68, 69.03]
            ],
            "biWeekly": [
                [12.59, 21.32, 34.42],
                [17.28, 27.70, 42.16],
                [27.61, 43.08, 63.72]
            ],
            "weekly": [
                [6.30, 10.66, 17.21],
                [8.64, 13.85, 21.08],
                [13.80, 21.54, 31.86]
            ]
        }
    },
    '11': {
        "deductible": 500,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIP": 4500,
        "payrollFrequency": {
            "monthly": [
                [34.27, 58.23, 94.16],
                [47.14, 75.75, 115.43],
                [75.49, 117.95, 174.57]
            ],
            "semiMonthly": [
                [17.14, 29.12, 47.08],
                [23.57, 37.88, 57.72],
                [37.75, 58.98, 87.29]
            ],
            "biWeekly": [
                [15.82, 26.88, 43.46],
                [21.76, 34.96, 53.28],
                [34.84, 54.44, 80.57]
            ],
            "weekly": [
                [7.91, 13.44, 21.73],
                [10.88, 17.48, 26.64],
                [17.42, 27.22, 40.29]
            ]
        }
    },
    '12': {
        "deductible": 500,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIP": 5500,
        "payrollFrequency": {
            "monthly": [
                [40.39, 68.75, 111.29],
                [55.63, 89.49, 136.47],
                [89.19, 139.46, 206.49]
            ],
            "semiMonthly": [
                [20.20, 34.38, 55.65],
                [27.82, 44.75, 68.24],
                [44.60, 69.73, 103.25]
            ],
            "biWeekly": [
                [18.64, 31.73, 51.36],
                [25.68, 41.30, 62.99],
                [41.16, 64.37, 95.30]
            ],
            "weekly": [
                [9.32, 15.87, 25.68],
                [12.84, 20.65, 31.49],
                [20.58, 32.18, 47.65]
            ]
        }
    }    
};

// content from:
// Final GAP RATES.xls, sheet: "HSA Health Plans-Std States 3T"
// plans 13, 14 ,15
// Standard State Rates ** updated rates 7/22/16 **

gapPlanData['HSA-stdSt-3T'] = {
    '13': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIPInd": 4300,
        "sumDedIPFam": 5600,
        "payrollFrequency": {
            "monthly": [
                [24.57, 41.54, 66.99], // ee
                [33.68, 53.95, 82.06], // ee+1
                [53.76, 83.84, 123.94] // ee+2+
            ],
            "semiMonthly": [
                [12.29, 20.77, 33.50],
                [16.84, 26.98, 41.03],
                [26.88, 41.92, 61.97]
            ],
            "biWeekly": [
                [11.34, 19.17, 30.92], 
                [15.54, 24.90, 37.87],
                [24.81, 38.70, 57.20]
            ],
            "weekly": [
                [5.67, 9.59, 15.46],
                [7.77, 12.45, 18.94],
                [12.41, 19.35, 28.60]
            ]
        }
    },
    '14': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIPInd": 5300,
        "sumDedIPFam": 6600,
        "payrollFrequency": {
            "monthly": [
                [31.21, 52.97, 85.60],
                [42.90, 68.88, 104.91],
                [68.65, 107.21, 158.62]
            ],
            "semiMonthly": [
                [15.61, 26.49, 42.80],
                [21.45, 34.44, 52.46],
                [34.33, 53.61, 79.31]
            ],
            "biWeekly": [
                [14.40, 24.45, 39.51], 
                [19.80, 31.79, 48.42],
                [31.68, 49.48, 73.21]
            ],
            "weekly": [
                [7.20, 12.22, 19.75],
                [9.90, 15.90, 24.21],
                [15.84, 24.74, 36.60]
            ]
        }
    },
    '15': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIPInd": 6300,
        "sumDedIPFam": 7600,
        "payrollFrequency": {
            "monthly": [
                [37.04, 62.98, 101.90],
                [50.98, 81.96, 124.93],
                [81.68, 127.67, 188.98]
            ],
            "semiMonthly": [
                [18.52, 31.49, 50.95],
                [25.49, 40.98, 62.47],
                [40.84, 63.84, 94.49]
            ],
            "biWeekly": [
                [17.10, 29.07, 47.03],
                [23.53, 37.83, 57.66],
                [37.70, 58.92, 87.22]
            ],
            "weekly": [
                [8.55, 14.53, 23.52],
                [11.76, 18.91, 28.83], 
                [18.85, 29.46, 43.61]
            ]
        }
    }              
};

// content from:
// Final GAP RATES.xls, sheet: "HSA Health Plans-CO & OH 4T"
// plans 13, 14 ,15
// CO & OH Rates ** updated rates 7/22/16 **

gapPlanData['HSA-alt-3T'] = {
    '13': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 3000,
        "outpatientPerson": 1500,
        "outpatientFamily": 3000,
        "sumDedIPInd": 4300,
        "sumDedIPFam": 5600,
        "payrollFrequency": {
            "monthly": [
                [21.58, 36.39, 58.61],
                [29.53, 47.22, 71.77],
                [47.06, 73.33, 108.33]
            ],
            "semiMonthly": [
                [10.79, 18.20, 29.31],
                [14.77, 23.61, 35.89],
                [23.53, 36.67, 54.17]
            ],
            "biWeekly": [
                [9.96, 16.80, 27.05],
                [13.63, 21.79, 33.12], 
                [21.72, 33.84, 50.00]
            ],
            "weekly": [
                [4.98, 8.40, 13.53],
                [6.81, 10.90, 16.56],
                [10.86, 16.92, 25.00]
            ]
        }   
    },
    '14': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 4000,
        "outpatientPerson": 2000,
        "outpatientFamily": 4000,
        "sumDedIPInd": 5300,
        "sumDedIPFam": 6600,
        "payrollFrequency": {
            "monthly": [
                [27.38, 46.37, 74.86],
                [37.58, 60.26, 91.72],
                [60.06, 93.72, 138.61]
            ],
            "semiMonthly": [
                [13.69, 23.19, 37.43],
                [18.79, 30.13, 45.86],
                [30.03, 46.86, 69.31]
            ],
            "biWeekly": [
                [12.64, 21.40, 34.55],
                [17.34, 27.81, 42.33],
                [27.72, 43.26, 63.97]
            ],
            "weekly": [
                [6.32, 10.70, 17.28],
                [8.67, 13.91, 21.17],
                [13.86, 21.63, 31.99]
            ]
        }
    },
    '15': {
        "deductibleInd": 1300,
        "deductibleFam": 2600,
        "inpatient": 5000,
        "outpatientPerson": 2500,
        "outpatientFamily": 5000,
        "sumDedIPInd": 6300,
        "sumDedIPFam": 7600,
        "payrollFrequency": {
            "monthly": [
                [32.46, 55.12, 89.09],
                [44.63, 71.68, 109.20],
                [71.43, 111.58, 165.12],
            ],
            "semiMonthly": [
                [16.23, 27.56, 44.55],
                [22.32, 35.84, 54.60],
                [35.72, 55.79, 82.56]
            ],
            "biWeekly": [
                [14.98, 25.44, 41.12],
                [20.60, 33.08, 50.40],
                [32.97, 51.50, 76.21]
            ],
            "weekly": [
                [7.49, 12.72, 20.56],
                [10.30, 16.54, 25.20],
                [16.48, 25.75, 38.10]
            ]
        }                
    }
};


// Data Methods that build strings of plain and formatted text

gapPlanData.description = function(){
    // description for Benefit Period Deductible cell on plan
    // illustration chart
    var plan = pf.gapPlan,
    description = 'HSA Compatible Benefit Period Deductible Minimum';

    if(plan !== 'HSA') {
        description = '';
    }
    
    return description;
};

gapPlanData.benefitOption = function(){
    // description for Benefit Period Deductible cell on plan
    // illustration chart
    var plan = pf.gapPlan,
    optionText = 'Individual Coverage (Employee Only)';
    optionText += '\n';
    optionText += 'Family Coverage';

    if (plan !== 'HSA'){
        optionText = 'Per Insured Person';
    }

    return optionText;
};

gapPlanData.gapNote = function(){ // under the plan illustration chart
    var plan = pf.gapPlan,
    gapParaText = 'To be HSA Compatible, the minimum Individual and Family Deductibles required by the IRS must be issued. The 2016 and 2017 minimum required deductible is $1,300/$2,600. The Deductible must apply to both the Inpatient and Outpatient Benefits and may not be waived for Accidents. The Physician Office Visit Benefit Rider may not be included.';

    if (plan !== 'HSA'){
        gapParaText = '';
    }

    return gapParaText;
};

// Plan Features, Benefits, Exclusions and Limitations

gapPlanData.gapFeatures = function(){
    var plan = pf.gapPlan,
    policy = "Each policy includes Inpatient Hospital benefits";

    if(plan !== 'HSA'){ // nonHSA
        policy += '. Optional Outpatient Hospital and Outpatient Physician Office Visit Benefit may be added.';
    } else { //HSA
        policy += 'and Outpatient Hospital benefits';
    }

    return policy;
};

gapPlanData.gapBenefitOutMax = function(){
    var plan = pf.gapPlan,
    perFamily = '&bull;&NDtab;Per Family: 2 times the per insured person outpatient maximum benefit.';

    if(plan !== 'HSA'){ // nonHSA
        perFamily = '';
    }

    return perFamily;
};

// ********************
// DATA FUNCTIONS
// ********************

    // global pf definitions:

    // pf.gapPlan  // HSA or Non HSA
    // pf.stateRates// standard or Alternate (CO + OH)
    // pf.rateTier // 3 Tier or 4 Tier

    // pf.payrollFrequency // monthly, semiMonthly, biWeekly, or weekly
    // pf.numberOfPlans 1,2,3

// helpers
function f_OR_matter(arr){ // helper function to make sure 'or' is before last value in list
    var arrLen = arr.length; // length of array
    var arrStr; 
    
    if(arrLen > 1){ // check the length
        var last = arr.pop(arrLen - 1); // hold the last value for a sec
        arrStr = arr.join(', ') + ' or ' + last; // join remaining values + ' or ' last
    } else {
        arrStr = arr.toString(); // 
    }
    
    return arrStr;
}

function f_money(value) { // display as dollar amounts
    var money;

    if (typeof value === "number"){
        value = value.toString();
        money = "$" + value.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    } else {
        money = value;
    }

    return money;
}

// display info back  
function displayPayRollProper(){
    var period = pf.payrollFrequency;

    switch (period) {
        case 'weekly' :
            period = 'Weekly';
            break;
        case 'biWeekly' :
            period = 'Bi-Weekly';
            break;
        case 'semiMonthly' :
            period = 'Semi-Monthly';
            break;
        default:
            period = 'Monthly';
    }

    return period;
}

function checkHSA(hsaPlan, nonHsaPlan, benefitType){
    var scope = pf.planScope(),
    benefitValue;

    if(pf.gapPlan === 'HSA'){
        benefitValue = scope[hsaPlan][benefitType];
    } else {
        benefitValue = scope[nonHsaPlan][benefitType];
    }

    return benefitValue;
}

function inpatientHospitalBenefit(hsaPlan, nonHsaPlan){ 
    var scope = pf.planScope(),
    benefitAmount;

    if (pf.gapPlan === 'HSA') {
        benefitAmount = scope[hsaPlan]['inpatient'];
    } else {
        benefitAmount = scope[nonHsaPlan]['inpatient'];
    }

    return f_money(benefitAmount);
}

function outpatientBenefitRider(hsaPlan, nonHsaPlan){ 
    var scope = pf.planScope(),
    benefitAmount;

    if (pf.gapPlan === 'HSA') {
        benefitAmount = scope[hsaPlan]['outpatientPerson'];
    } else {
        benefitAmount = scope[nonHsaPlan]['outpatientPerson'];
    }

    return f_money(benefitAmount);
}

function benefitPeriodDeductible(hsaPlan, nonHsaPlan){
    var scope = pf.planScope(),
    benefitAmount;

    if (pf.gapPlan === 'HSA') {
        benefitAmount = f_money(scope[hsaPlan]['deductibleInd']) + ' ';
        benefitAmount += '&br;' + '\n';
        benefitAmount += f_money(scope[hsaPlan]['deductibleFam']);
    } else {
        benefitAmount = f_money(scope[nonHsaPlan]['deductible']);
    }

    //benefitAmount = checkHSA(hsaPlan, nonHsaPlan, 'deductible');

    return benefitAmount;
}


// use method on gapPlanData to pull Benefit Period Deductible
// description text if HSA is selected

function deductibleDescription() {  
    return gapPlanData.description();
}

// use method on gapPlanData to pull Benefit Option
// text if HSA is selected

function benefitOptionText() {  
    return gapPlanData.benefitOption();
}

// use method on gapPlanData to pull gap plan note text
function gapNoteText() {  
    return gapPlanData.gapNote();
}

// use method for gapFeatures to populate bulle point 3 text
function gapFeaturesText() {  
    return gapPlanData.gapFeatures();
}

function gapMaxBenefitPlanValues(){ 
    var scope = pf.planScope(),

    plansSelected = pf.listPlansSelected(), // store plan id's here ('1', '2', '6', '14', ect)
    maxBenefitValues = []; // store max values associated with plan selections

    for (var i = 0; i < plansSelected.length; i++) {
        maxBenefitValues.push(
            f_money(scope[plansSelected[i]]['inpatient'])
        );
    }

    return f_OR_matter(maxBenefitValues);
}

function gapBenefitOutMaxText(){
    return gapPlanData.gapBenefitOutMax();
}

function benefitFeatDeductibles(){
    var plan = pf.gapPlan,
    scope = pf.planScope(),
    planList = pf.listPlansSelected(), // array of plans
    deductibleVals = []; // array of plan deductible values

    var i = 0; // this loop is mainly for non-hsa deductibles at the moment
    for (i; i < planList.length; i++) {
        deductibleVals.push(
            f_money(scope[planList[i]]['deductible'])
        );
    }

    var dedText = '<?Pageflex pf_xfp_ver="1"?>'; // pageflex formatted paragraphs
    
    if (plan === 'HSA') {
    // hsa
        dedText += '<body-heading>';
        dedText += '<_char>HSA Compatible Benefit Period Deductible Minimum</_char>';
        dedText += '</body-heading>';
        dedText += '<body-list>';
        dedText += '<_char>&bull;&NDtab;Individual Coverage (Employee Only):&NDtab;&NDtab;&NDtab;&NDtab;&NDtab;&NDtab;$1,300</_char>';
        dedText += '</body-list>';
        dedText += '<body-list>';
        dedText += '<_char>&bull;&NDtab;Family Coverage :&NDtab;&NDtab;&NDtab;&NDtab;&NDtab;&NDtab;$2,600</_char>';
        dedText += '</body-list>';
        dedText += '<body>';
        dedText += '<_char></_char>';
        dedText += '</body>';
        dedText += '<body-section-footnote>';
        dedText += '<_char>Note: If one or more dependents are covered under the employee\'s certificate of insurance, the entire Family Coverage Deductible must first be met before any benefits will be paid for any Insured Person. The Family Deductible may be satisfied by one or more Insured Persons. This type of deductible is required for High Deductible Health Plans (HDHP) that are HSA Compatible. To be HSA Compatible, the minimum Individual and Family Deductibles required by the IRS must be issued. The Deductible must apply to both the Inpatient and Outpatient Benefits and the Physician Office Visit Benefit Rider may not be elected. These limitations do not apply to gap plans that do not need to be HSA compatible, in which case, the minimum</_char>';
        dedText += '</body-section-footnote>';
        dedText += '<body-section-footnote>';
        dedText += '<_char>Individual deductible available is $1,000.</_char>';
        dedText += '</body-section-footnote>';
    } else {
    // nonhsa
        

        dedText += '<body-heading>';
        dedText += '<_char>Traditional Per Person Benefit Period Deductible with Optional Family Maximum</_char>';
        dedText += '</body-heading>';
        dedText += '<body-list>';
        dedText += '<_char>&bull;&NDtab;Per Insured Person per Benefit Period: ' + f_OR_matter(deductibleVals) + '</_char>';
        dedText += '</body-list>';
        dedText += '<body-section-footnote>';
        dedText += '<_char>Note: Benefits are payable for an Insured Person after they have satisfied the "per Insured Person" deductible.</_char>';
        dedText += '</body-section-footnote>';
    }

    return dedText;
}


// ********************
// VISUAL ELEMENT STRUCTURE (RATE TABLES)
// ********************

function buildRateTable() {

    // catch plan info & controls
    var scope = pf.planScope(), // HSA > state-rates > rate-tier > ...
    plan1 = PFGetValue('GapPlan1'),
    plan2 = PFGetValue('GapPlan2'),
    plan3 = PFGetValue('GapPlan3'),

    plansSelected = pf.listPlansSelected(), // store plan id's here ('1', '2', '6', '14', ect)
    planNames = []; // store plan names

    
    var planOptions = { // (expression) ? true : false
        'hsaList1' : (plan1 !== '') ? (
            planNames.push(PFGetValue('GapPlan1Name'))
        ) : false,
        'hsaList2' : (plan2 !== '') ? (
            planNames.push(PFGetValue('GapPlan2Name'))
        ) : false,
        'hsaList3' : (plan3 !== '') ? (
            planNames.push(PFGetValue('GapPlan3Name'))
        ) : false
    };

    // function to point to rates
    function rate(index){
       // scope > (look into the plansSelected array with the index passed from the loop)
       // retrieve the plan number
       // '16' > 'payrollFrequency' > 'monthly' > 
       // defined in the loop = ( [0], [1], or [2] ) > ( [0], [1], [2], or [3] )
       return scope[plansSelected[index]]['payrollFrequency'][pf.payrollFrequency]; 
    }

    // start xml build
    var premiumsXATStart = '<!--ATModel:PF_Area_Template_Box-->';
    premiumsXATStart += '<!--size:1905815,1095477-->';
    premiumsXATStart += '<?Pageflex pf_xat_ver="1"?>';
    premiumsXATStart += '<PF_VBox_Base border_simple_thickness="0" border_name="_none" h_align_contents="center" v_align_contents="center" display_order="0" height="shrinkwrap" width="1905815" y_position="0" x_position="0">';
    
    var premiumsXATBody = []; 
    
    var premiumsXATEnd = '</PF_VBox_Base>';
    
    var i = 0,
    premiumPlanTable = '';

    if (pf.rateTier === '4T') { // build 4-tier table
        
        for (i; i < pf.plansSelected(); i++) {
            //vertical box start
            premiumPlanTable = '<PF_VBox_Base name="GapHSARates4Tier" x_position="126338" y_position="1472002" width="shrinkwrap" height="shrinkwrap" display_order="11" v_align_contents="top" h_align_contents="left" border_name="_none" border_simple_thickness="0" top_margin="31750">';
            // table group header row
            premiumPlanTable += '<PF_HBox_Base x_position="126338" y_position="2112110" width="shrinkwrap" height="shrinkwrap" display_order="10" v_align_contents="top" h_align_contents="left" border_name="_none" border_simple_thickness="0" min_height="25400">'; 
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="12700" top_margin="12700" right_margin="25400" left_margin="25400" fill_color="White" fill_name="_solid_fill" runaround="false" height="shrinkwrap" width="444500" display_order="10" y_position="2112110" x_position="126338">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="393700" min_width="0">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>' + planNames[i] + '</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="12700" top_margin="12700" right_margin="25400" left_margin="25400" fill_color="White" fill_name="_solid_fill" runaround="false" height="shrinkwrap" width="1461315" display_order="11" y_position="2112110" x_position="570838">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="1410515" min_width="0">';
            premiumPlanTable += '<table_before_label>';
            premiumPlanTable += '<_char>Employee Premiums</_char>';
            premiumPlanTable += '</table_before_label>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // table header row
            premiumPlanTable += '<PF_HBox_Base x_position="126338" y_position="2172780" width="shrinkwrap" height="shrinkwrap" display_order="6" v_align_contents="center" h_align_contents="center" border_name="_none" border_simple_thickness="0">';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="444500" display_order="6" y_position="2057517" x_position="126338">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="393700" min_width="0">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char></_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="282755" display_order="7" y_position="2057517" x_position="570838">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="231955" min_width="0">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char>Employee</_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="853593" y_position="2057517" display_order="8" width="386080" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780">';
            premiumPlanTable += '<_text_column min_width="0" max_width="335280" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char>Employee + Spouse</_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="9" y_position="2057517" x_position="1239673">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char>Employee + Children</_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="10" y_position="2057517" x_position="1635913">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char>Employee + Family</_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // age less than 40 
            premiumPlanTable += '<PF_HBox_Base x_position="126338" y_position="2254060" width="shrinkwrap" height="shrinkwrap" display_order="7" v_align_contents="center" h_align_contents="center" border_name="_none" border_simple_thickness="0">';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="444500" display_order="6" y_position="2057517" x_position="126338">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="393700" min_width="0">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>Age less than 40</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="282755" display_order="7" y_position="2057517" x_position="570838">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="231955" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[0][0] + ' </_char>'; // iterate on i+1 to get the corresponding plan selection (plan 1, plan 2 or plan 3)
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" x_position="853593" y_position="2057517" display_order="8" width="386080" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780">';
            premiumPlanTable += '<_text_column min_width="0" max_width="335280" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[0][1] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="9" y_position="2057517" x_position="1239673">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[0][2] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="10" y_position="2057517" x_position="1635913">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[0][3] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // age less than 40-49
            premiumPlanTable += '<PF_HBox_Base x_position="126338" y_position="2335340" width="shrinkwrap" height="shrinkwrap" display_order="8" v_align_contents="center" h_align_contents="center" border_name="_none" border_simple_thickness="0">';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="100.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="White" fill_name="_solid_fill" runaround="false" height="maximize" width="444500" display_order="6" y_position="2057517" x_position="126338">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="393700" min_width="0">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>Age 40-49</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="100.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="White" fill_name="_solid_fill" runaround="false" height="maximize" width="282755" display_order="7" y_position="2057517" x_position="570838">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="231955" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[1][0] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="100.000000" x_position="853593" y_position="2057517" display_order="8" width="386080" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="White" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780">';
            premiumPlanTable += '<_text_column min_width="0" max_width="335280" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[1][1] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="100.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="White" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="9" y_position="2057517" x_position="1239673">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[1][2] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="100.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="White" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="10" y_position="2057517" x_position="1635913">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[1][3] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // age less than 50+
            premiumPlanTable += '<PF_HBox_Base x_position="126338" y_position="2416620" width="shrinkwrap" height="shrinkwrap" display_order="9" v_align_contents="center" h_align_contents="center" border_name="_none" border_simple_thickness="0">';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="444500" display_order="6" y_position="2057517" x_position="126338">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="393700" min_width="0">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>Age 50+</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="282755" display_order="7" y_position="2057517" x_position="570838">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="231955" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[2][0] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" x_position="853593" y_position="2057517" display_order="8" width="386080" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780">';
            premiumPlanTable += '<_text_column min_width="0" max_width="335280" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[2][1] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="9" y_position="2057517" x_position="1239673">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[2][2] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base fill_tint="20.000000" bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="396240" display_order="10" y_position="2057517" x_position="1635913">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="345440" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[2][3] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // vertical box end
            premiumPlanTable += '</PF_VBox_Base>';

            // push xml to premiumsXATBody array    
            premiumsXATBody.push(premiumPlanTable);
        }

    } else { // build 3-tier table

        for (i; i < pf.plansSelected(); i++) {
            // table group header row
            premiumPlanTable = '<PF_VBox_Base border_simple_thickness="0" border_name="_none" h_align_contents="left" v_align_contents="top" display_order="0" height="shrinkwrap" width="shrinkwrap" y_position="0" x_position="0" name="GapHSARates3Tier" top_margin="31750">';
            premiumPlanTable += '<PF_HBox_Base min_height="25400" border_simple_thickness="0" border_name="_none" h_align_contents="left" v_align_contents="top" display_order="10" height="shrinkwrap" width="shrinkwrap" y_position="2112110" x_position="126338">';
            premiumPlanTable += '<PF_TextFrame_Base x_position="126338" y_position="2112110" display_order="10" width="444500" height="shrinkwrap" runaround="false" fill_name="_solid_fill" fill_color="White" left_margin="25400" right_margin="25400" top_margin="12700" bottom_margin="12700">';
            premiumPlanTable += '<_text_column min_width="0" max_width="393700" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>' + planNames[i] + '</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="570838" y_position="2112110" display_order="11" width="1461315" height="shrinkwrap" runaround="false" fill_name="_solid_fill" fill_color="White" left_margin="25400" right_margin="25400" top_margin="12700" bottom_margin="12700">';
            premiumPlanTable += '<_text_column min_width="0" max_width="1410515" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_before_label>';
            premiumPlanTable += '<_char>Employee Premiums</_char>';
            premiumPlanTable += '</table_before_label>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // table header row
            premiumPlanTable += '<PF_HBox_Base border_simple_thickness="0" border_name="_none" h_align_contents="center" v_align_contents="center" display_order="6" height="shrinkwrap" width="shrinkwrap" y_position="2172780" x_position="126338">';
            premiumPlanTable += '<PF_TextFrame_Base x_position="126338" y_position="2057517" display_order="6" width="444500" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780">';
            premiumPlanTable += '<_text_column min_width="0" max_width="393700" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char></_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="570838" y_position="2057517" display_order="7" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char>Employee</_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="484124" display_order="8" y_position="2057517" x_position="853593">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="433324" min_width="0">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char>Employee +1</_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="1239673" y_position="2057517" display_order="9" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_header>';
            premiumPlanTable += '<_char>Employee +2 +</_char>';
            premiumPlanTable += '</table_header>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // age under 40
            premiumPlanTable += '<PF_HBox_Base border_simple_thickness="0" border_name="_none" h_align_contents="center" v_align_contents="center" display_order="7" height="shrinkwrap" width="shrinkwrap" y_position="2254060" x_position="126338">';
            premiumPlanTable += '<PF_TextFrame_Base x_position="126338" y_position="2057517" display_order="6" width="444500" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="393700" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>Age less than 40</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="570838" y_position="2057517" display_order="7" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[0][0] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="484124" display_order="8" y_position="2057517" x_position="853593" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="433324" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[0][1] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="1239673" y_position="2057517" display_order="9" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[0][2] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // age 40-49
            premiumPlanTable += '<PF_HBox_Base border_simple_thickness="0" border_name="_none" h_align_contents="center" v_align_contents="center" display_order="8" height="shrinkwrap" width="shrinkwrap" y_position="2335340" x_position="126338">';
            premiumPlanTable += '<PF_TextFrame_Base x_position="126338" y_position="2057517" display_order="6" width="444500" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="White" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="100.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="393700" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>Age 40-49</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="570838" y_position="2057517" display_order="7" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="White" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="100.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[1][0] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="White" fill_name="_solid_fill" runaround="false" height="maximize" width="484124" display_order="8" y_position="2057517" x_position="853593" fill_tint="100.000000">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="433324" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[1][1] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="1239673" y_position="2057517" display_order="9" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="White" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="100.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[1][2] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // age 50+
            premiumPlanTable += '<PF_HBox_Base border_simple_thickness="0" border_name="_none" h_align_contents="center" v_align_contents="center" display_order="9" height="shrinkwrap" width="shrinkwrap" y_position="2416620" x_position="126338">';
            premiumPlanTable += '<PF_TextFrame_Base x_position="126338" y_position="2057517" display_order="6" width="444500" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="393700" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell_leftHeading>';
            premiumPlanTable += '<_char>Age 50+</_char>';
            premiumPlanTable += '</table_cell_leftHeading>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="570838" y_position="2057517" display_order="7" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[2][0] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base bottom_margin="17780" top_margin="17780" right_margin="25400" left_margin="25400" fill_color="Kemper_Orange" fill_name="_solid_fill" runaround="false" height="maximize" width="484124" display_order="8" y_position="2057517" x_position="853593" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column runaround="false" v_align_contents="center" max_width="433324" min_width="0">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[2][1] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '<PF_TextFrame_Base x_position="1239673" y_position="2057517" display_order="9" width="484124" height="maximize" runaround="false" fill_name="_solid_fill" fill_color="Kemper_Orange" left_margin="25400" right_margin="25400" top_margin="17780" bottom_margin="17780" fill_tint="20.000000">';
            premiumPlanTable += '<_text_column min_width="0" max_width="433324" v_align_contents="center" runaround="false">';
            premiumPlanTable += '<table_cell>';
            premiumPlanTable += '<_char>$' + rate(i)[2][2] + '</_char>';
            premiumPlanTable += '</table_cell>';
            premiumPlanTable += '</_text_column>';
            premiumPlanTable += '</PF_TextFrame_Base>';
            premiumPlanTable += '</PF_HBox_Base>';
            // vert box end
            premiumPlanTable += '</PF_VBox_Base>';

            // push xml to premiumsXATBody array    
            premiumsXATBody.push(premiumPlanTable);
        }
    }

    return premiumsXATStart + premiumsXATBody.join('') + premiumsXATEnd;
    //return xat_array.join('');
}
